#VBF cuts                                                                                                                                                                                               


#-------------------------------------------------------------------------------                                                                                                                           
# supercut                                                                                                                                                                                                 
#-------------------------------------------------------------------------------                                                                                                                           
_tmp = [
     'Lepton_pdgId[0]*Lepton_pdgId[1] == -11*13',
     'Lepton_pt[0] > 25.',
     'Lepton_pt[1] > 13.',
     '(abs(Lepton_pdgId[1]) == 13 || Lepton_pt[1] > 13.)',
     '(nLepton >= 2 && Alt$(Lepton_pt[2], 0) < 10.)'
     ]

supercut = ' && '.join(_tmp)


def addcut(name, exprs):
    cuts[name] = ' && '.join(exprs)



#-------------------------------------------------------------------------------                                                                                                                           
# No Cuts                                                                                                                                                                                          
#-------------------------------------------------------------------------------                                                                                                                           
_tmp = [
     'Lepton_pt[1] > 20.'
     ]

addcut('noCuts', _tmp)

#-------------------------------------------------------------------------------                                                                                                                           
# Top                                                                                                                                                                                                      
#-------------------------------------------------------------------------------                                                                                                                           
_tmp = [
     'Sum$(CleanJet_pt > 20. && abs(CleanJet_eta) < 2.5 && Jet_btagDeepB[CleanJet_jetIdx] > 0.2217) >= 1',
     'abs(CleanJet_eta[0]) < 4.5',
     'mll > 80'
     ]

addcut('Top', _tmp)

#-------------------------------------------------------------------------------                                                                                                                           
# DY                                                                                                                                                                                                      
#-------------------------------------------------------------------------------                                                                                                                           
_tmp = [
     'Sum$(CleanJet_pt > 20. && abs(CleanJet_eta) < 2.5 && Jet_btagDeepB[CleanJet_jetIdx] > 0.2217) == 0',
     'mth < 40',
     'mll < 80'
     ]

addcut('DY', _tmp)

######

#-------------------------------------------------------------------------------                                                                                                                           
# WW                                                                                                                                                                                                       
#-------------------------------------------------------------------------------                                                                                                                           
_tmp = [
     'Sum$(CleanJet_pt > 20. && abs(CleanJet_eta) < 2.5 && Jet_btagDeepB[CleanJet_jetIdx] > 0.2217) == 0',
     'Lepton_pt[1] > 20.'
     ]

addcut('WW_1', _tmp)

#-------------------------------------------------------------------------------                                                                                                                           
# WW                                                                                                                                                                                                       
#-------------------------------------------------------------------------------                                                                                                                           
_tmp = [
     'Lepton_pt[1] > 20.',
     'mth > 60',
     'mpmet > 10'
     ]

addcut('WW_2', _tmp)

#-------------------------------------------------------------------------------                                                                                                                           
# WW                                                                                                                                                                                                       
#-------------------------------------------------------------------------------                                                                                                                           
_tmp = [
     'Lepton_pt[1] > 20.',
     '(D_Top < -1 || D_Top > 0.25)'
     ]

addcut('WW_3', _tmp)

#-------------------------------------------------------------------------------                                                                                                                           
# WW                                                                                                                                                                                                       
#-------------------------------------------------------------------------------                                                                                                                           
_tmp = [
      'Lepton_pt[1] > 20.',
     '(Sum$(CleanJet_pt>30) > 0 || dnn_0 > 0.6)',
     '(Sum$(CleanJet_pt>30) != 1 || dnn_1 > 0.4)',
     '(Sum$(CleanJet_pt>30) <= 1 || dnn_2 > 0.4)'
     ]

addcut('WW_4', _tmp)

#-------------------------------------------------------------------------------                                                                                                                           
# WW                                                                                                                                                                                                       
#-------------------------------------------------------------------------------                                                                                                                           
_tmp = [
     'Sum$(CleanJet_pt > 20. && abs(CleanJet_eta) < 2.5 && Jet_btagDeepB[CleanJet_jetIdx] > 0.2217) == 0',
     'Lepton_pt[1] > 20.',
     '(D_Top < -1 || D_Top > 0.25)',
     ]

addcut('WW_5', _tmp)

#-------------------------------------------------------------------------------                                                                                                                           
# WW                                                                                                                                                                                                       
#-------------------------------------------------------------------------------                                                                                                                           
_tmp = [
     'Lepton_pt[1] > 20',
     'Sum$(CleanJet_pt > 20. && abs(CleanJet_eta) < 2.5 && Jet_btagDeepB[CleanJet_jetIdx] > 0.2217) == 0',
     'mll > 20',
     'ptll > 30',
     'mpmet > 10',
     'Sum$(CleanJet_pt > 30.) <= 1'
     ]

addcut('WW_sequential', _tmp)

#-------------------------------------------------------------------------------                                                                                                                           
# WW                                                                                                                                                                                                       
#-------------------------------------------------------------------------------                                                                                                                           
_tmp = [
     'Sum$(CleanJet_pt > 20. && abs(CleanJet_eta) < 2.5 && Jet_btagDeepB[CleanJet_jetIdx] > 0.2217) == 0',
     'mth > 60',
     'mpmet > 10',
     'Lepton_pt[1] > 20.',
     '(D_Top < -1 || D_Top > 0.25)',
     '(Sum$(CleanJet_pt>30) > 0 || dnn_0 > 0.6)',
     '(Sum$(CleanJet_pt>30) != 1 || dnn_1 > 0.4)',
     '(Sum$(CleanJet_pt>30) <= 1 || dnn_2 > 0.4)'
     ]

addcut('WW', _tmp)


#-------------------------------------------------------------------------------                                                                                                                           
# WW                                                                                                                                                                                                       
#-------------------------------------------------------------------------------                                                                                                                           
_tmp = [
     'Sum$(CleanJet_pt>30) >= 0',
     'Sum$(CleanJet_pt > 20. && abs(CleanJet_eta) < 2.5 && Jet_btagDeepB[CleanJet_jetIdx] > 0.2217) == 0',
     'mth > 60',
     'mpmet > 10',
     '(D_Top < -1 || D_Top > 0.25)'
     ]

addcut('WW_noDNN', _tmp)

#-------------------------------------------------------------------------------                                                                                                                           
# WW                                                                                                                                                                                                       
#-------------------------------------------------------------------------------                                                                                                                           
_tmp = [                                                                                                                                                                                                   
     'Sum$(CleanJet_pt>30) == 0',                                                                                                                                                                          
     'Sum$(CleanJet_pt > 20. && abs(CleanJet_eta) < 2.5 && Jet_btagDeepB[CleanJet_jetIdx] > 0.2217) == 0',                                                                                                 
     'mth > 60',                                                                                                                                                                                           
     'mpmet > 10',                                                                                                                                                                                         
     '(D_Top < -1 || D_Top > 0.25)',                                                                                                                                                                       
     '(Sum$(CleanJet_pt>30) > 0 || dnn_0 > 0.6)',                                                                                                                                                          
     '(Sum$(CleanJet_pt>30) != 1 || dnn_1 > 0.4)',                                                                                                                                                         
     '(Sum$(CleanJet_pt>30) <= 1 || dnn_2 > 0.4)'                                                                                                                                                          
     ]                                                                                                                                                                                                     
                                                                                                                                                                                                           
addcut('WW_0jet', _tmp)   

#-------------------------------------------------------------------------------                                                                                                                           
# WW                                                                                                                                                                                                       
#-------------------------------------------------------------------------------                                                                                                                           
_tmp = [
     'Sum$(CleanJet_pt>30) == 0',
     'Sum$(CleanJet_pt > 20. && abs(CleanJet_eta) < 2.5 && Jet_btagDeepB[CleanJet_jetIdx] > 0.2217) == 0',
     'mth > 60',
     'mpmet > 10',
     '(D_Top < -1 || D_Top > 0.25)'
     ]

addcut('WW_0jet_noDNN', _tmp)

#-------------------------------------------------------------------------------                                                                                                                           
# WW                                                                                                                                                                                                       
#-------------------------------------------------------------------------------                                                                                                                           
_tmp = [
     'abs(CleanJet_eta[0]) < 4.7',
     'Sum$(CleanJet_pt>30) == 1',
     'Sum$(CleanJet_pt > 20. && abs(CleanJet_eta) < 2.5 && Jet_btagDeepB[CleanJet_jetIdx] > 0.2217) == 0',
     'mth > 60',
     'mpmet > 10',
     '(D_Top < -1 || D_Top > 0.25)',
     '(Sum$(CleanJet_pt>30) > 0 || dnn_0 > 0.6)',
     '(Sum$(CleanJet_pt>30) != 1 || dnn_1 > 0.4)',
     '(Sum$(CleanJet_pt>30) <= 1 || dnn_2 > 0.4)'
     ]

addcut('WW_1jet', _tmp)

#-------------------------------------------------------------------------------                                                                                                                           
# WW                                                                                                                                                                                                       
#-------------------------------------------------------------------------------                                                                                                                           
_tmp = [
     'abs(CleanJet_eta[0]) < 4.7',
     'Sum$(CleanJet_pt>30) == 1',
     'Sum$(CleanJet_pt > 20. && abs(CleanJet_eta) < 2.5 && Jet_btagDeepB[CleanJet_jetIdx] > 0.2217) == 0',
     'mth > 60',
     'mpmet > 10',
     '(D_Top < -1 || D_Top > 0.25)'
     ]

addcut('WW_1jet_noDNN', _tmp)

#-------------------------------------------------------------------------------                                                                                                                           
# WW                                                                                                                                                                                                       
#-------------------------------------------------------------------------------                                                                                                                           
_tmp = [
     'abs(CleanJet_eta[0]) < 4.7',
     'abs(CleanJet_eta[1]) < 4.7',
     'Sum$(CleanJet_pt>30) == 2',
     'Sum$(CleanJet_pt > 20. && abs(CleanJet_eta) < 2.5 && Jet_btagDeepB[CleanJet_jetIdx] > 0.2217) == 0',
     'mth > 60',
     'mpmet > 10',
     '(D_Top < -1 || D_Top > 0.25)',
     '(Sum$(CleanJet_pt>30) > 0 || dnn_0 > 0.6)',
     '(Sum$(CleanJet_pt>30) != 1 || dnn_1 > 0.4)',
     '(Sum$(CleanJet_pt>30) <= 1 || dnn_2 > 0.4)'
     ]

addcut('WW_2jet', _tmp)

#-------------------------------------------------------------------------------                                                                                                                           
# WW                                                                                                                                                                                                       
#-------------------------------------------------------------------------------                                                                                                                           
_tmp = [
     'abs(CleanJet_eta[0]) < 4.7',
     'abs(CleanJet_eta[1]) < 4.7',
     'Sum$(CleanJet_pt>30) == 2',
     'Sum$(CleanJet_pt > 20. && abs(CleanJet_eta) < 2.5 && Jet_btagDeepB[CleanJet_jetIdx] > 0.2217) == 0',
     'mth > 60',
     'mpmet > 10',
     '(D_Top < -1 || D_Top > 0.25)',
     ]

addcut('WW_2jet_noDNN', _tmp)
